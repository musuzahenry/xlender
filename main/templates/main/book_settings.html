
{% extends "main/base.html" %}
{% load static %}
{% load humanize %}

{% block content %}


{% if user.is_authenticated %}

<div class="row">



    <h1 class="col-sm-12">Book Settings</h1>

    <div class="col-12 col-md-12">
        <p class="col-12">
            <p style="margin-bottom: 2px;"><b>Add Book</b></p>
            <form class="form-inline" method="POST" action="{% url 'main:book-settings' %}">
                {% csrf_token %}
                <select   name="station-id" id="station">
                    <option  value="0">Choose Station</option>
                    {% for station in get_global_db_objects.stations %}
                        <option value="{{station.id}}">{{station.station_name}}</option>          
                    {% endfor %}
                </select> &nbsp;
                <input type="hidden"  name="loan-typeID" value="1">

                <input type="number" name="book-fee" placeholder="Book Fee" required/>
                <button class="btn btn-sm btn-info text-white" type="submit">Add Book Price</button>
            </form>
            </p>
    </div>
        
    {% for message in messages %}
        <p class="bg-success text-white" style="width:100% !important; text-align: center;">
        {{message}}
        </p>
    {% endfor %}


    <table class="table table-striped table-bordered">
        <thead class="bg-info text-white">
            <tr>
                <td>Station Name</td> 
                <td>Loan Type</td>          
                <td>Book Fee</td> 
                <td></td>
            </tr>
        </thead>

        <tbody>
            {% for book in auto_items %}
            <form action="" method="POST">
                {% csrf_token %}
                <input type="hidden" name="item-id" value="{{book.id}}"> 
                <input type="hidden" name="loan-type-id" value="{{book.loan_typeID.id}}"> 
            <tr>
                <td>
                       {{book.stationID}} 
                </td> 

                <td>
                    {{book.loan_typeID}} 
                </td>
                <td>
                    <input type="number" name="unit-price" value="{{book.unit_price | floatformat:0 }}"> 
                </td>

                <td>
                  <button type="submit" class="btn btn-info btn-sm text-white">Save</button>
                </td>
  
            </tr>
        </form>
            {% endfor %}
        </tbody>

        <tfoot  class="bg-dark text-white">
            <tr>
                <td></td> 
                <td></td> 
                <td></td> 
                <td></td> 
            </tr>
        </tfoot>

    </table>
    
</div>


{% endif %}
{% endblock %}
