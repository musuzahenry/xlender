
{% extends "main/base.html" %}
{% load static %}
{% load humanize %}

{% block content %}


{% if user.is_authenticated %}

<div class="row">


        {% for message in messages %}
        <p class="bg-success text-white col-12" style="width:100% !important; text-align: center;">
        {{message}}
        </p>
        {% endfor %}


    <div class="col-12 col-md-4">
    <form style="margin-top: 10px; border:1px solid black; border-radius: 7px; padding: 10px;"
        method="POST" action="">
        {% csrf_token %}
        <table>

            <tr><td>
        <select   name="station-id" id="station">
            <option  value="0">Choose Station</option>
            {% for station in get_global_db_objects.stations %}
                <option value="{{station.id}}">{{station.station_name}}</option>          
            {% endfor %}
        </select>
        </td>
    </tr>
    <tr><td>
        <button class="btn btn-sm btn-info text-white" type="submit">Load</button>
    </td></tr></table>
    </form>
    </div>


<div class="col-12">
    <p><a href="{% url 'main:view-employees'%}">Active</a> &nbsp;| <a href="{% url 'main:view-deleted-employees' %}">Deleted</a></p>
</div>


<div class="col-12 col-md-4"></div>

    <h1 class="col-sm-12">{{title}}</h1>

    <table class="table table-striped table-bordered">
        <thead class="bg-info text-white">
            <tr>
                <td>Hire Date</td> <td>Station</td> <td>Full Name</td>          
                <td>Pay Now</td> <td>Delete</td>
            </tr>
        </thead>
        <tbody>

            {% for employee in employees %}
            <tr>
                <td>
                       {{employee.hire_date | date:'M d, Y' }}
                </td> 
                <td>
                    {{employee.stationID}}
                </td> 
                <td>
                    {{employee.surname}} {{employee.first_name}}
                </td> 
                <td>
                    <button class="btn btn-sm btn-success" data-target="#pay-form{{employee.id}}" data-toggle="collapse"
                    ><i class="fa fa-check fa-beat-fade"></i>&nbsp; Pay Salary</button>
                    <form action="" method="POST" 
                    id="pay-form{{employee.id}}" class="form-inline collapse tbl-edit-form">
                    {% csrf_token %}
                        <input type="hidden" name="pay-salary-id" value="{{employee.id}}">
                        <input type="hidden" name="pay-method-id" value="1">
                        <input type="hidden" name="supper-typeID" value="2">
                        <input type="hidden" name="cat-name" value="salary">
                        <input type="number" name="amount" value="{{employee.net_pay | floatformat }}">
                        <input style="margin-top: 2px;"type="submit" class="btn btn-sm btn-info" value="Submit">

                     </form>
                </td> 
                <td>
                    <button class="btn btn-sm btn-success" data-target="#pay-delform{{employee.id}}" data-toggle="collapse"
                    ><i class="fa fa-arrow-right fa-beat-fade"></i>&nbsp; Hide</button>
                    <form action="" method="POST" 
                    id="pay-delform{{employee.id}}" class="form-inline collapse tbl-edit-form">
                    {% csrf_token %}

                        <input type="hidden" name="emp-del-id" value="{{employee.id}}">
                        <textarea style="margin-top: 2px; width:100%;"name="details" placeholder="Give details"></textarea>
    
                        <input style="margin-top: 2px;"type="submit" class="btn btn-sm btn-info" value="Submit">

                     </form>
                    
                </td> 
            </tr>
            {% endfor %}
        </tbody>

        <tfoot  class="bg-dark text-white">
            <tr>
                <td></td> 
                <td></td> 
                <td></td> 
                <td></td> 
                <td></td> 
            </tr>
        </tfoot>

    </table>
    
</div>


{% endif %}
{% endblock %}
