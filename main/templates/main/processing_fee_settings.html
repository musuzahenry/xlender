
{% extends "main/base.html" %}
{% load static %}
{% load humanize %}

{% block content %}


{% if user.is_authenticated %}

<div class="row">



    <h1 class="col-sm-12">Processing Fee Settings</h1>

    <div class="col-12 col-md-12">
        <p class="col-12">
            <form class="form-inline" method="POST" action="{% url 'main:processing-fee-settings' %}">
                {% csrf_token %}
                <select   name="station-id" id="station">
                    <option  value="0">Choose Station</option>
                    {% for station in get_global_db_objects.stations %}
                        <option value="{{station.id}}">{{station.station_name}}</option>          
                    {% endfor %}
                </select> &nbsp;
                 <button class="btn btn-sm btn-info text-white" type="submit">Load</button>
            </form>
            </p>
    </div>

    <div class="col-12 col-md-12">
        <p class="col-12">
            <p style="margin-bottom: 2px;"><b>Add Processing Fee</b></p>
            <form class="form-inline" method="POST" action="{% url 'main:processing-fee-settings' %}">
                {% csrf_token %}
                <select   name="station-id" id="station1">
                    <option  value="0">Choose Station</option>
                    {% for station in get_global_db_objects.stations %}
                        <option value="{{station.id}}">{{station.station_name}}</option>          
                    {% endfor %}
                </select> &nbsp;
                <select  name="loan-typeID" id="loan-typeID">
                    <option value="0">Choose Loan Type</option>
                    {% for loan_type in get_global_db_objects.loan_types %}
                        <option value="{{loan_type.id}}">{{loan_type.loan_type_name}}</option>          
                    {% endfor %}
                </select> &nbsp;
                <input type="number" name="unit-price" placeholder="Processing Fee Price" required />
                <input type="number" name="lower-limit" placeholder="Lower Limit" required />
                <input type="number" name="upper-limit" placeholder="Upper Limit" required />
                <button class="btn btn-sm btn-info text-white" type="submit">Add Price</button>
            </form>
            </p>
    </div>
        
    {% for message in messages %}
        <p class="bg-success text-white" style="width:100% !important; text-align: center;">
        {{message}}
        </p>
    {% endfor %}


    <table class="table table-striped table-bordered">
        <thead class="bg-info text-white">
            <tr>
                <td>Station Name</td> 
                <td>Loan Type</td>        
                <td>Processing Fee</td>
                <td>Lower Limit</td>
                <td>Upper Limit</td> 
                <td></td>
            </tr>
        </thead>

        <tbody>
            {% for processing_fee in auto_items %}
            <form action="" method="POST" action="{% url 'main:processing-fee-settings' %}">
                {% csrf_token %}
                <input type="hidden" name="item-id" value="{{processing_fee.id}}"> 
                <input type="hidden" name="loan-type-id" value="{{processing_fee.loan_typeID.id}}"> 
            <tr>
                <td>
                       {{processing_fee.stationID}} 
                </td> 

                <td>
                    {{processing_fee.loan_typeID}} 
             </td>
 
                <td>
                    <input type="number" name="unit-price" value="{{processing_fee.unit_price | floatformat:0 }}"> 
                </td>

                <td>
                    <input type="number" name="lower-limit" value="{{processing_fee.lower_limit | floatformat:0 }}"> 
                </td>

                <td>
                    <input type="number" name="upper-limit" value="{{processing_fee.upper_limit | floatformat:0 }}"> 
                </td>

                <td>
                  <button type="submit" class="btn btn-info btn-sm text-white">Save</button>
                </td>
  
            </tr>
        </form>
            {% endfor %}
        </tbody>

        <tfoot  class="bg-dark text-white">
            <tr>
                <td></td> 
                <td></td> 
                <td></td> 
                <td></td> 
                <td></td> 
                <td></td> 
            </tr>
        </tfoot>

    </table>
    
</div>


{% endif %}
{% endblock %}
